{"ast":null,"code":"var _jsxFileName = \"/home/mario/Desktop/Procesos/pruebaFasrev/client/src/components/App.js\";\nimport { Component } from 'react';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport './App.css';\nimport Navigation from './layout/Navigation/Navigation';\nimport Routes from './routes/Routes';\nimport AuthService from '../service/auth.service';\nimport Alert from './shared/Alert/Alert';\nimport OrdersService from '../service/order.service';\nimport CategoryService from '../service/category.service';\nimport Sidebar from './layout/Sidebar/Sidebar';\nimport Footer from './layout/Footer/Footer';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n\n    this.storeUser = loggedUser => this.setState({\n      loggedUser\n    });\n\n    this.fetchUser = () => {\n      this.authService.isloggedin().then(response => this.setState({\n        loggedUser: response.data\n      })).catch(() => this.setState({\n        loggedUser: undefined\n      }));\n    };\n\n    this.updateCurrentUser = () => {\n      this.authService.updateUser().then(response => {\n        this.setState({\n          loggedUser: response.data\n        });\n      }).catch(() => this.setState({\n        loggedUser: undefined\n      }));\n    };\n\n    this.state = {\n      loggedUser: null,\n      showAlert: false,\n      alertText: '',\n      orderNumber: 0,\n      categoryList: undefined\n    };\n    this.authService = new AuthService();\n    this.orderService = new OrdersService();\n    this.categoryService = new CategoryService();\n  }\n\n  handleAlert(alertText, showAlert = true) {\n    this.setState({\n      showAlert,\n      alertText\n    });\n  }\n\n  componentDidMount() {\n    this.fetchUser();\n    this.updateCurrentUser();\n    this.loadCategories();\n    this.updateCartNumber();\n  }\n\n  updateCartNumber() {\n    this.orderService.getUserOrder().then(response => {\n      response.data ? this.setState({\n        orderNumber: response.data[0].products.length\n      }) : this.setState({\n        orderNumber: 0\n      });\n    }).catch(err => {\n      console.log(err);\n      this.setState({\n        orderNumber: 0\n      });\n    });\n  }\n\n  loadCategories() {\n    this.categoryService.getAllCategories().then(response => this.setState({\n      categoryList: response.data\n    })).catch(err => console.log('Error', err));\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [this.state.loggedUser && this.state.loggedUser.role === 'ADMIN' ? null : /*#__PURE__*/_jsxDEV(Navigation, {\n        handleAlert: alertText => this.handleAlert(alertText),\n        storeUser: user => this.storeUser(user),\n        loggedUser: this.state.loggedUser,\n        orderNumber: this.state.orderNumber,\n        categoryList: this.state.categoryList,\n        updateCartNumber: () => this.updateCartNumber()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: this.state.loggedUser && this.state.loggedUser.role === 'ADMIN' ? {\n          display: 'flex',\n          width: \"100%\"\n        } : null,\n        children: [this.state.loggedUser && this.state.loggedUser.role === 'ADMIN' ? /*#__PURE__*/_jsxDEV(Sidebar, {\n          storeUser: user => this.storeUser(user)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 82\n        }, this) : null, /*#__PURE__*/_jsxDEV(\"main\", {\n          style: {\n            flex: '1'\n          },\n          children: [/*#__PURE__*/_jsxDEV(Routes, {\n            style: {\n              marginTop: \"10px\"\n            },\n            storeUser: user => this.storeUser(user),\n            loggedUser: this.state.loggedUser,\n            handleAlert: alertText => this.handleAlert(alertText),\n            updateCartNumber: () => this.updateCartNumber(),\n            updateCurrentUser: () => this.updateCurrentUser()\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 92,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Alert, {\n            handleAlert: (alertText, showAlert) => this.handleAlert(alertText, showAlert),\n            show: this.state.showAlert,\n            text: this.state.alertText\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true);\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/home/mario/Desktop/Procesos/pruebaFasrev/client/src/components/App.js"],"names":["Component","Navigation","Routes","AuthService","Alert","OrdersService","CategoryService","Sidebar","Footer","App","constructor","props","storeUser","loggedUser","setState","fetchUser","authService","isloggedin","then","response","data","catch","undefined","updateCurrentUser","updateUser","state","showAlert","alertText","orderNumber","categoryList","orderService","categoryService","handleAlert","componentDidMount","loadCategories","updateCartNumber","getUserOrder","products","length","err","console","log","getAllCategories","render","role","user","display","width","flex","marginTop"],"mappings":"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","sourcesContent":["import { Component } from 'react'\nimport 'bootstrap/dist/css/bootstrap.min.css'\nimport './App.css'\nimport Navigation from './layout/Navigation/Navigation'\nimport Routes from './routes/Routes'\nimport AuthService from '../service/auth.service'\nimport Alert from './shared/Alert/Alert'\nimport OrdersService from '../service/order.service'\nimport CategoryService from '../service/category.service'\nimport Sidebar from './layout/Sidebar/Sidebar'\nimport Footer from './layout/Footer/Footer'\n\nclass App extends Component {\n\n  constructor(props) {\n    super(props)\n    this.state = {\n      loggedUser: null,\n      showAlert: false,\n      alertText: '',\n      orderNumber: 0,\n      categoryList: undefined\n    }\n    this.authService = new AuthService()\n    this.orderService = new OrdersService()\n    this.categoryService = new CategoryService()\n  }\n\n\n  handleAlert(alertText, showAlert = true) {\n    this.setState({ showAlert, alertText })\n  }\n\n  storeUser = loggedUser => this.setState({ loggedUser })\n\n  fetchUser = () => {\n    this.authService\n      .isloggedin()\n      .then(response => this.setState({ loggedUser: response.data }))\n      .catch(() => this.setState({ loggedUser: undefined }))\n  }\n\n  updateCurrentUser = () => {\n    this.authService\n      .updateUser()\n      .then(response => {\n        this.setState({ loggedUser: response.data })\n      })\n      .catch(() => this.setState({ loggedUser: undefined }))\n  }\n\n  componentDidMount() {\n    this.fetchUser()\n    this.updateCurrentUser()\n    this.loadCategories()\n    this.updateCartNumber()\n  }\n\n  updateCartNumber() {\n    this.orderService\n      .getUserOrder()\n      .then(response => {\n        response.data ? this.setState({ orderNumber: response.data[0].products.length }) : this.setState({ orderNumber: 0 })\n      })\n      .catch(err => {\n        console.log(err)\n        this.setState({ orderNumber: 0 })\n      })\n  }\n\n  loadCategories() {\n    this.categoryService\n      .getAllCategories()\n      .then(response => this.setState({ categoryList: response.data }))\n      .catch(err => console.log('Error', err))\n  }\n\n  render() {\n    return (\n      (\n        <>\n          {this.state.loggedUser && this.state.loggedUser.role === 'ADMIN' ? null :\n            <Navigation handleAlert={alertText => this.handleAlert(alertText)}\n              storeUser={user => this.storeUser(user)} loggedUser={this.state.loggedUser} orderNumber={this.state.orderNumber} categoryList={this.state.categoryList} updateCartNumber={() => this.updateCartNumber()} />}\n\n          <div style={this.state.loggedUser && this.state.loggedUser.role === 'ADMIN' ? { display: 'flex', width: \"100%\" } : null}>\n\n            {(this.state.loggedUser && this.state.loggedUser.role === 'ADMIN') ? <Sidebar storeUser={user => this.storeUser(user)} /> : null}\n\n            <main style={{ flex: '1' }}>\n\n              <Routes style={{ marginTop: \"10px\" }} storeUser={user => this.storeUser(user)} loggedUser={this.state.loggedUser} handleAlert={alertText => this.handleAlert(alertText)} updateCartNumber={() => this.updateCartNumber()} updateCurrentUser={() => this.updateCurrentUser()} />\n\n              <Alert handleAlert={(alertText, showAlert) => this.handleAlert(alertText, showAlert)} show={this.state.showAlert} text={this.state.alertText} />\n\n            </main>\n          </div>\n          <Footer />\n        </>\n      )\n    )\n  }\n}\n\nexport default App\n"]},"metadata":{},"sourceType":"module"}